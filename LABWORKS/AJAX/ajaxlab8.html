<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Catalog</title>
</head>
<body>
    <input type="text" id="searchInput" placeholder="Search products">
    <select id="sortSelect">
        <option value="name">Sort by Name</option>
        <option value="price">Sort by Price</option>
    </select>
    <div id="productList"></div>

    <script>
        // Function to fetch and display products
        async function fetchAndDisplayProducts() {
            const productList = document.getElementById("productList");
            const searchInput = document.getElementById("searchInput");
            const sortSelect = document.getElementById("sortSelect");

            try {
                const response = await fetch("https://cynthiaesthermetilda.github.io/Xhrdemo/products.json");
                if (!response.ok) {
                    throw new Error("Failed to fetch products");
                }

                const products = await response.json();
                displayProducts(products);

                // Add event listeners for search and sorting
                searchInput.addEventListener("input", () => filterProducts(products));
                sortSelect.addEventListener("change", () => sortProducts(products));
            } catch (error) {
                console.error(error.message);
            }
        }

        // Function to display products
        function displayProducts(products) {
            const productList = document.getElementById("productList");
            productList.innerHTML = "";

            products.forEach((product) => {
                const productDiv = document.createElement("div");
                productDiv.classList.add("product");

                const productName = document.createElement("h2");
                productName.textContent = product.name;

                const productDescription = document.createElement("p");
                productDescription.textContent = product.description;

                const productPrice = document.createElement("p");
                productPrice.textContent = "Price: $" + product.price;

                const productImage = document.createElement("img");
                productImage.src = product.image;
                productImage.alt = product.name;

                productDiv.appendChild(productName);
                productDiv.appendChild(productDescription);
                productDiv.appendChild(productPrice);
                productDiv.appendChild(productImage);

                productList.appendChild(productDiv);
            });
        }

        // Function to filter products based on search input
        function filterProducts(products) {
            const searchInput = document.getElementById("searchInput");
            const searchKeyword = searchInput.value.toLowerCase();

            const filteredProducts = products.filter((product) =>
                product.name.toLowerCase().includes(searchKeyword)
            );

            displayProducts(filteredProducts);
        }

        // Function to sort products
        function sortProducts(products) {
            const sortSelect = document.getElementById("sortSelect");
            const sortBy = sortSelect.value;

            const sortedProducts = [...products];

            if (sortBy === "name") {
                sortedProducts.sort((a, b) => a.name.localeCompare(b.name));
            } else if (sortBy === "price") {
                sortedProducts.sort((a, b) => a.price - b.price);
            }

            displayProducts(sortedProducts);
        }

        // Fetch and display products when the page loads
        window.onload = fetchAndDisplayProducts;
    </script>

    <style>
        .product {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px;
        }

        img {
            max-width: 100px;
            max-height: 100px;
        }
    </style>
</body>
</html>